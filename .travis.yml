language: php

php:
    - 7.1.19
    - 7.2.7
    - 7.3
    - 7.4

env:
    global:
        - deps=high

install:
    - composer install --ignore-platform-reqs

before_script:
    - if [ -f $HOME/.phpenv/versions/$(phpenv global)/etc/conf.d/xdebug.ini ]; then phpenv config-rm xdebug.ini; fi

script:
    - vendor/bin/phpstan analyse -c phpstan.neon --level 7 .
    - vendor/phpunit/phpunit/phpunit --debug

notifications:
  email: "douglas@usemarkup.com"

sudo: required
dist: xenial
